<head>

<title>CS106B</title>

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta http-equiv="content-type" content="text/html; charset=UTF8">


<link href="//web.stanford.edu/class/cs106b/plugins/bootstrap-custom/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="//web.stanford.edu/class/cs106b/style.css">

<!-- Java Script -->
<script src="//web.stanford.edu/class/cs106b/plugins/jquery.min.js"></script>
<script src="//web.stanford.edu/class/cs106b/plugins/moment.min.js"></script>
<script src="//web.stanford.edu/class/cs106b/plugins/bootstrap-custom/js/bootstrap.min.js"></script>
<script src="//web.stanford.edu/class/cs106b/plugins/ace/ace.js" type="text/javascript"></script>


<!-- Stanford -->
<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Source+Serif+Pro:400,600,700' rel='stylesheet' type='text/css'>

	<script src="//web.stanford.edu/class/cs106b/js/queue.js"></script>
	<script src="//web.stanford.edu/class/cs106b/js/heapQueue.js"></script>

</head>
<body>

	<!-- Navigation Bar -->
<nav class="navbar navbar-inverse">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand brand" href="//web.stanford.edu/class/cs106b/">CS106B</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">

        <!--<li><a href="#">Lectures</a></li>-->

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Lectures <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="//web.stanford.edu/class/cs106b//lectures/0-Welcome/">0 Welcome</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//lectures/1-Functions/">1 Functions</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//lectures/2-VectorsGrids/">2 Vector and Grid</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//lectures/3-StacksQueue/">3 Stack and Queue</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//lectures/4-MapsSets/">4 Map and Set</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//lectures/5-Collections/">5 The Right Priority</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//lectures/6-Recursion/">6 Recursive Thinking</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//lectures/7-Fractals/">7 Fractals</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//lectures/8-Exploration/">8-Exploration</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//lectures/9-Exploration2/">9-Exploration2</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//lectures/10-BigO/">10-BigO</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//lectures/11-Memoization/">11-Memoization</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//lectures/12-Classes/">12-Classes</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//lectures/13-Pointers/">13-Pointers</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//lectures/14-LinkedLists/">14-LinkedLists I</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//lectures/15-LinkedLists2/">15-LinkedLists II</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//lectures/16-PriorityQueues/">16-BinaryHeap</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//lectures/17-Hashing/">17-Hashing</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//lectures/18-Trees/">18-Trees</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//lectures/19-Trees2/">19-Trees2</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//lectures/20-SearchTrees/">20-SearchTrees</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//lectures/21-Graphs/">21-Graphs</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//lectures/22-Search/">22-Search</a></li>
          </ul>
        </li>

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Handouts <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="//web.stanford.edu/class/cs106b//handouts/overview.html">Course Overview</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//handouts/course-placement.pdf">Course Placement</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//handouts/honor-code.pdf">Honor Code</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//handouts/qt-creator.html">QT Creator</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//handouts/velociraptorSafety.html">Grids and Raptor Safety</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//handouts/bananagrams.html">Bananagrams</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//handouts/duoslango.html">Duoslango</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//handouts/midterm.html">Midterm Info</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//handouts/search.html">Search</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Assignments <span class="caret"></span></a>
          <ul class="dropdown-menu">
           <li><a href="//web.stanford.edu/class/cs106b//assn/life.html">1 Life</a></li>
           <li><a href="//web.stanford.edu/class/cs106b//assn/serafini.html">2 Serafini</a></li>
           <li><a href="//web.stanford.edu/class/cs106b//assn/metaAcademy.html">3 Meta Academy</a></li>
           <li><a href="//web.stanford.edu/class/cs106b//assn/boggle.html">4 Boggle</a></li>
           <li><a href="//web.stanford.edu/class/cs106b//assn/pqueue.html">5 PQueue</a></li>
           <li><a href="//web.stanford.edu/class/cs106b//assn/huffman.html">6 Huffman</a></li>
           <li role="separator" class="divider"></li>
           <li><a href="//web.stanford.edu/class/cs106b//assn/contest.html">Contest</a></li>
           <!--<li><a href=""><i>None yet!</i></a></li>-->

          </ul>
        </li>

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Sections <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="//web.stanford.edu/class/cs106b//sections/section01.pdf">Section 01</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//sections/section01-solutions.pdf">Section 01 Soln</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//sections/section02.pdf">Section 02</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//sections/section02-solutions.pdf">Section 02 Soln</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//sections/section03.pdf">Section 03</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//sections/section03-solutions.pdf">Section 03 Soln</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//sections/section04.pdf">Section 04</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//sections/section04-solutions.pdf">Section 04 Soln</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//sections/section05.pdf">Section 05</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//sections/section05-solutions.pdf">Section 05 Soln</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//sections/section06.pdf">Section 06</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//sections/section06-solutions.pdf">Section 06 Soln</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//sections/section07.pdf">Section 07</a></li>
            <li><a href="//web.stanford.edu/class/cs106b//sections/section07-solutions.pdf">Section 07 Soln</a></li>
          </ul>
        </li>

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Tools <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="//web.stanford.edu/class/cs106b//handouts/help.html">Help Hours Calendar</a></li>
           <li><a href="//web.stanford.edu/class/cs106b//handouts/diff.html">Example Diff Tool</a></li>
           <!--<li><a href=""><i>None yet!</i></a></li>-->

          </ul>
        </li>
       
      </ul>

      <ul class="nav navbar-nav navbar-right">
        <li><a href="//web.stanford.edu/class/cs106b//handouts/overview.html"><span class="glyphicon glyphicon-apple" aria-hidden="true"> Overview</span></a></li>
      </ul>
      
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>
	<div class="container">
			
		<!-- Header -->
	<div class="row">
		<div class="col-sm-12">
			<div id="pageHeader">
				<h1>
					Search
				</h1>
			</div>
			<hr/>
		</div>
	</div>

	
	<div class="row">
		<div class="col-sm-12">
      <p>
			<button type="button" class="btn btn-primary" onclick="runDFS();">Recursive Exploration</button>
    </p>
		</div>
	</div>

	<div class="row">
		<div class="col-sm-12">
      <p>
			<button type="button" class="btn btn-info" onclick="unweightedGraph();">Random Graph</button>
		</p>
		</div>
	</div>

	<div class="row">
		<div class="col-sm-12">
	      <p>
				<canvas id="graphCanvas">
					Why you not have canvas?
				</canvas>
	    </p>
	    <h2>
	    	Path hops: <span id="hopsNum"></span>
	    </h2>
	    <h2>
	    	Path cost: <span id="costNum"></span>
	    </h2>
		</div>
	</div>

	<script>

    CANVAS_HEIGHT = 500
    CANVAS_WIDTH = 730
    INSET = 5
    ANIMATION_PAUSE = 10

	points = {}
    graph = {}
    weights = {}
    isWeighted = false;
    startId = null;
    endId = null;
    canvas = null;
    ctx = null;
    fresh = false;
    timeout = null;

    function Point(x, y){
      this.x = x || 0;
      this.y = y || 0;
    };

		window.onload = function() {
      initCanvas();
      unweightedGraph();
		}

    function initCanvas() {
      canvas = $('#graphCanvas')[0]
      ctx = canvas.getContext("2d");
      $('#canvas').height(CANVAS_HEIGHT);
      canvas.width = CANVAS_WIDTH;
      canvas.height = CANVAS_HEIGHT;
      
    }

    function getDist(point1, point2) {
      var dx = point1.x - point2.x;
      var dy = point1.y - point2.y;
      return Math.sqrt(dx * dx + dy * dy);
    }

    function randomIndex(arr) {
      return Math.floor(arr.length * Math.random())
    }

    function randomChoice(arr) {
      return arr[randomIndex(arr)];
    }

    function deepCopy(arr) {
      var newArr = []
      for(var i = 0; i < arr.length; i++) {
        newArr.push(arr[i]);
      }
      return newArr;
    }

    function drawCircle(pt, radius, color) {
      ctx.fillStyle=color;
      ctx.beginPath();
      ctx.arc(pt.x, pt.y, radius, 0, 2 * Math.PI, false);
      ctx.fill();
    }

    function drawLine(pt1, pt2, color) {
      ctx.strokeStyle = color;
      ctx.beginPath();
      ctx.moveTo(pt1.x, pt1.y);
      ctx.lineTo(pt2.x, pt2.y);
      ctx.stroke();
      
    }

    function highlightPath(path) {
      for(var i = 0; i < path.length; i++) {
        var nodeId = path[i];
        drawCircle(points[nodeId], 6, "red");
        if(i < path.length - 1) {
          var nextId = path[i + 1];
          drawLine(points[nodeId], points[nextId], "red");
        }
      }
      $("#hopsNum").html(path.length);
      $("#costNum").html(pathCost(path))
    }


    seenDFS = {};

    function runDFS() {
      if(!fresh) refresh();
      fresh = false;
      stack = [];
      seenDFS = {};
      stack.push([startId])
      iterDFS(stack)
    }

    function iterDFS(stack) {
      if(stack.length == 0) return;
      var path = stack.pop();
      var nextId = path[path.length - 1];
      console.log(nextId)

      if(nextId in seenDFS) {
        iterDFS(stack);
        return;
      }
      seenDFS[nextId] = true;
      drawCircle(points[nextId], 4, "blue");
      if(path.length >= 2) {
        var prevId = path[path.length-2];
        drawLine(points[prevId], points[nextId], "blue");
      }
      if(nextId == endId) {
        highlightPath(path);
        return;
      }
      for(var i = 0; i < graph[nextId].length; i++) {
        var child = graph[nextId][i];
        var newPath = deepCopy(path);
        newPath.push(child);
        stack.push(newPath);
      }
      timeout = setTimeout(function(){iterDFS(stack)}, ANIMATION_PAUSE);
    }

    function pathCost(path) {
    	if(!isWeighted) return path.length
    	var cost = 0
    	for(var i = 0; i < path.length-1; i++) {
    		var a = path[i]
    		var b = path[i + 1]
    		var key = a + "->" + b
    		var weight = weights[key]
    		cost += weight
    	}
    	return cost;
    } 

    function runBFS() {
      if(!fresh) refresh();
      fresh = false;
      var queue = new Queue();
      var seen = {}
      var paths = []
      var found = false;
      queue.enqueue([startId]);
      while(!queue.isEmpty()) {
        var currPath = queue.dequeue();
        var nextId = currPath[currPath.length - 1];
        if(nextId in seen) continue;
        paths.push(currPath)
        if(nextId == endId) {
          found = true;
          break;
        }
        seen[nextId] = true;
        for(var i = 0; i < graph[nextId].length; i++) {
          var child = graph[nextId][i];
          var newPath = deepCopy(currPath);
          newPath.push(child);
          queue.enqueue(newPath);
        }
      }
      animate(paths, function() {
        if(found) {
          var lastPath = paths[paths.length - 1];
          highlightPath(lastPath);
        } 
      })
    }

    function runDijkstra() {
    	if(!isWeighted) return runBFS();
    	if(!fresh) refresh();
		fresh = false;

		var pQueue = new HeapQueue(function(a, b){
		    // if b > a, return negative
		    // means that it spits out the smallest item first
		  return pathCost(a) - pathCost(b)
		})

		var seen = {}
		var paths = []
		var found = false;
		pQueue.push([startId]);
		while(pQueue.length != 0) {
			var currPath = pQueue.pop();
			var nextId = currPath[currPath.length - 1];
			if(nextId in seen) continue;
			paths.push(currPath)
			if(nextId == endId) {
			  found = true;
			  break;
			}
			seen[nextId] = true;
			for(var i = 0; i < graph[nextId].length; i++) {
			  var child = graph[nextId][i];
			  var newPath = deepCopy(currPath);
			  newPath.push(child);
			  pQueue.push(newPath);
			}
		}
		animate(paths, function() {
			if(found) {
			  var lastPath = paths[paths.length - 1];
			  highlightPath(lastPath);
			} 
		})
    }

    function animate(paths, callback) {
      var index = 0
      timeout = setTimeout(function() {
        var path = paths[index];
        console.log(path)
        if(path.length >= 2) {
          var id1 = path[path.length-2]
          var id2 = path[path.length-1]
          drawLine(points[id1], points[id2], "blue");
        }
        var lastId = path[path.length - 1]
        drawCircle(points[lastId], 4, "blue");
        index++;
        if(index < paths.length) {
          timeout = setTimeout(arguments.callee, ANIMATION_PAUSE);
        } else {
          callback();
        }
      }, ANIMATION_PAUSE);
    }

    function drawGraph() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      $("#hopsNum").html("");
    	$("#costNum").html("");

      for(nodeId in graph) {
        for(var i = 0; i < graph[nodeId].length; i++) {
          var nextId = graph[nodeId][i];
          drawLine(points[nodeId], points[nextId], "#AAAAAA");
        }
      }

      for(var i = 0; i < points.length; i++) {
        drawCircle(points[i], 2, "black")
      }
      drawCircle(points[startId], 10, "green")
      drawCircle(points[endId], 10, "red")

      fresh = true;
    }

    function drawWeights() {
    	ctx.font = "12px Courier";
	    ctx.fillStyle = "black"
	    console.log(weights)
	    for(nodeId in graph) {
	        for(var i = 0; i < graph[nodeId].length; i++) {
	        	var nextId = graph[nodeId][i];
	        	var midX = (points[nodeId].x + points[nextId].x) / 2;
	        	var midY = (points[nodeId].y + points[nextId].y) / 2;
	        	var key = nodeId + "->" + nextId
	        	var weight = weights[key];
	        	ctx.fillText(weight,midX,midY);
	        }
	    }
    }

    function unweightedGraph() {
    	isWeighted = false;
    	randomGraph(500, 40, 5);
    	drawGraph();
    }

    function weightedGraph() {
    	isWeighted = true;
    	randomGraph(25, 200, 100);
    	weights = {}
    	for(nodeId in graph) {
	        for(var i = 0; i < graph[nodeId].length; i++) {
	          var nextId = graph[nodeId][i];
	          var key1 = nodeId + "->" + nextId
	          var key2 = nextId + "->" + nodeId
	          if(!(key1 in weights)) {
	          	var d = getDist(points[nodeId], points[nextId])
	          	var m = 1 + Math.random() * 10;
	          	var dist = Math.ceil(d * m);
	          	weights[key1] = dist;
	          	weights[key2] = dist;
	          }
	        }
	    }

	    drawGraph();
	    drawWeights();
    }

    function isTooClose(point, i, minDist) {
    	for(var j = 0; j < i; j++) {
    		if(getDist(points[j], point) < minDist) {
    			return true;
    		}
    	}
    	return false;
    }

    function refresh() {
    	drawGraph();
    	if(isWeighted) {
    		drawWeights();
    	}
    }

	function randomGraph(nPoints, edgeDist, minDist) {
      //clear graph and canvas
      clearTimeout(timeout);
      points = []
      graph = {}
      for(var i = 0; i < nPoints; i++) {
        var centerX = INSET + (canvas.width - INSET *2) * Math.random();
        var centerY = INSET + (canvas.height - INSET *2) * Math.random();
        var point = new Point(centerX, centerY);
        if(minDist > 0) {
        	while(isTooClose(point, i, minDist)) {
        		centerX = INSET + (canvas.width - INSET *2) * Math.random();
        		centerY = INSET + (canvas.height - INSET *2) * Math.random();
        		point = new Point(centerX, centerY);
        	}
        }
        
        points[i] = point;
        graph[i] = []
	  }
      startId = randomIndex(points);
      endId = randomIndex(points);

      for(var i = 0; i < nPoints; i++) {
        for(var j = 0; j < i; j++) {
          if(getDist(points[i], points[j]) < edgeDist) {
	            graph[i].push(j);
	            graph[j].push(i);
          }
        }
      }
	}

	</script>
		
		
				
		


	



<div class="row">
	<div class="col-md-12">
		<hr>

		<div class="footer">
			<p class="pull-left">
				&#169; Stanford 2016 &#124; Created by 
				<a href="http://stanford.edu/~cpiech">Chris</a>.
				CS106B has been developed by many talented teachers. Special thanks to <a href="http://cs.stanford.edu/people/eroberts/">Eric</a> and <a href="www.martystepp.com">Marty</a>.
			</p>
		</div>
	</div>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-74362126-1', 'auto');
  ga('send', 'pageview');

</script>

	</div>

</body>
